version: "3.9"

services:
  bot:
    image: ghcr.io/hblwrk/discord-bot-js:main
    deploy:
      resources:
        limits:
          cpus: "1"
          memory: 1024M
        reservations:
          cpus: "0.5"
          memory: 512M
    read_only: true
    ulimits:
      nofile:
        soft: 65536
        hard: 65536
    ports:
      - "11312:11312"
    secrets:
      - production_discord_token
      - production_discord_clientID
      - production_discord_guildID
      - production_dracoon_password
      - production_healthcheck_port
      - production_twelvedata_apikey
      - production_hblwrk_NYSEAnnouncement_ChannelID
      - production_hblwrk_MNCAnnouncement_ChannelID
      - production_hblwrk_OtherAnnouncement_ChannelID
      - production_discord_btcusd_token
      - production_discord_btcusd_clientID
      - production_discord_ethusd_token
      - production_discord_ethusd_clientID
      - production_discord_spx_token
      - production_discord_spx_clientID
      - production_discord_nq_token
      - production_discord_nq_clientID
      - production_discord_rty_token
      - production_discord_rty_clientID
      - production_discord_vix_token
      - production_discord_vix_clientID
      - production_discord_dax_token
      - production_discord_dax_clientID

secrets:
  production_discord_token:
    external: true
  production_discord_clientID:
    external: true
  production_discord_guildID:
    external: true
  production_dracoon_password:
    external: true
  production_healthcheck_port:
    external: true
  production_twelvedata_apikey:
    external: true
  production_hblwrk_NYSEAnnouncement_ChannelID:
    external: true
  production_hblwrk_MNCAnnouncement_ChannelID:
    external: true
  production_hblwrk_NYSEAnnouncement_ChannelID:
    external: true
  production_hblwrk_OtherAnnouncement_ChannelID:
    external: true
  production_discord_btcusd_token:
    external: true
  production_discord_btcusd_clientID:
    external: true
  production_discord_ethusd_token:
    external: true
  production_discord_ethusd_clientID:
    external: true
  production_discord_spx_token:
    external: true
  production_discord_spx_clientID:
    external: true
  production_discord_nq_token:
    external: true
  production_discord_nq_clientID:
    external: true
  production_discord_rty_token:
    external: true
  production_discord_rty_clientID:
    external: true
  production_discord_vix_token:
    external: true
  production_discord_vix_clientID:
    external: true
  production_discord_dax_token:
    external: true
  production_discord_dax_clientID:
    external: true
